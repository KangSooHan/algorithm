#include <stdio.h>
#include <vector>
#include <queue>

using namespace std;

struct cmp{
    bool operator()(pair<int, int> const &a,pair<int, int> const &b){
        if(a.second != b.second) return a.second > b.second;
        else return a.first > b.first;
    }
};

priority_queue<pair<int, int>, vector<pair<int, int>>, cmp> pq;


int N, M;
int MAP[16][16];
int visit[16][16];

vector<pair<int, int>> per;
typedef pair<int, pair<int, int>> info;

struct Q{
    info pool[300];
    int r, l;

    void init(){
        r=l=0;
    }

    void push(info data){
        pool[r++] = data;
    }

    info pop(){
        return pool[l++];
    }

    bool empty(){
        return r==l;
    }
};

Q q;

int dx[4] = {-1, 0, 0, 1};
int dy[4] = {0, -1, 1, 0};

void alloc(int t){
    for(int i=0; i<N; ++i)for(int j=0; j<N; ++j) visit[i][j] = 0;
    q.init();
    visit[per[t].first][per[t].second] = 1;
    /*
    q.push(make_pair(0, per[t]));
    int len = -1;
    while(!q.empty())
    {
        info cur = q.pop();

        //if(cur.first == len) pq.push(cur.second);

        for(int d=0; d<4; ++d)
        {
            int nx = cur.second.first + dx[d];
            int ny = cur.second.second + dy[d];
            printf("%d %d", nx, ny);
            if(nx < 0 || ny < 0 || nx>=N || ny >= N) continue;
            if(visit[nx][ny]==1) continue;
            if(MAP[nx][ny]==-1) continue;
            if(MAP[nx][ny]==1) len = cur.first+1;
            visit[nx][ny] = 1;
            q.push(info(cur.first+1, make_pair(nx, ny)));
        }
    }
        */

/*
    MAP[pq.top().first][pq.top().second] = -1;
    while(!pq.empty()){
        pq.pop();
    }
    printf("%d %d", pq.top().first, pq.top().second);
    */
}

int main(){
    freopen("input.txt", "r", stdin);
    scanf("%d %d", &N, &M);

    for(int i=0; i<N; ++i){
        for(int j=0; j<N; ++j){
            scanf("%d", &MAP[i][j]);
        }
    }


    for(int i=0; i<M; ++i){
        pair<int, int> cur;
        scanf("%d %d", &cur.first, &cur.second);
        cur.first--; cur.second--;
        printf("%d", cur.first);
        per.emplace_back(cur);
    }

    int time = 0;
    while(true){
        //move();
        //stop();
        if(time < M) alloc(time);
        time++;
    }
    return 0;
}
